(()=>{"use strict";var t={943:(t,e,n)=>{n.r(e)},300:(t,e,n)=>{n.r(e)},463:(t,e,n)=>{n.r(e)},784:(t,e,n)=>{n.r(e)},559:(t,e,n)=>{n.r(e)},154:(t,e,n)=>{n.r(e)},601:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const a=n(252),i=n(866);e.App=class{constructor(){this.garage=new i.Garage,this.winners=new a.Winners,this.main=document.querySelector(".main");const t=document.querySelector(".to-winners-btn"),e=document.querySelector(".to-garage-btn");null==t||t.addEventListener("click",(()=>this.toWinnersPage())),null==e||e.addEventListener("click",(()=>this.toGaragePage()))}toWinnersPage(){var t;return r(this,void 0,void 0,(function*(){this.removeMainContent(),null===(t=this.main)||void 0===t||t.append(yield this.winners.render())}))}toGaragePage(){var t;this.removeMainContent(),null===(t=this.main)||void 0===t||t.append(this.garage.render())}removeMainContent(){this.main&&(this.main.innerHTML="")}render(){return this.garage.render()}}},731:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CarImg=void 0,e.CarImg=()=>'\n  <?xml version="1.0" standalone="no"?>\n<!DOCTYPE svg >\n<svg id=\'car-img\' version="1.0" xmlns="http://www.w3.org/2000/svg"\n width="64" height="32" viewBox="0 0 1280.000000 640.000000"\n preserveAspectRatio="xMidYMid meet">\n<g id="car-color" transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)"\nfill="#000" stroke="none">\n<path d="M3525 5341 c-72 -18 -79 -28 -90 -121 -4 -30 -11 -62 -16 -71 -4 -9\n-97 -51 -206 -94 -774 -304 -1348 -540 -1603 -661 -163 -77 -222 -91 -421\n-104 -85 -5 -170 -14 -189 -20 -101 -32 -362 -58 -620 -63 l-115 -2 -47 -80\nc-47 -78 -47 -80 -29 -100 34 -36 35 -77 5 -177 -30 -99 -34 -178 -19 -370 5\n-67 4 -88 -6 -88 -29 0 -83 -56 -110 -114 -50 -106 -74 -343 -48 -467 13 -58\n13 -62 3 -159 -5 -54 16 -238 28 -244 2 -1 29 -20 61 -41 73 -49 123 -103 132\n-143 17 -79 167 -155 355 -181 104 -15 969 -97 1087 -104 l32 -2 5 160 c7 230\n50 394 146 559 281 479 917 673 1405 429 316 -159 530 -424 598 -742 22 -106\n29 -365 13 -519 l-8 -82 3002 0 c2855 0 3002 1 2995 18 -33 87 -56 325 -45\n461 28 320 177 567 459 759 399 273 847 282 1243 24 239 -157 397 -392 460\n-687 18 -84 15 -341 -5 -430 -8 -38 -14 -71 -12 -73 7 -8 386 20 478 34 180\n28 253 65 304 152 24 41 28 57 28 127 -1 44 -9 117 -20 163 -18 79 -18 88 -2\n190 31 199 40 306 41 497 1 176 -1 195 -23 260 -46 135 -103 190 -283 274\n-222 104 -633 220 -1168 330 -523 108 -1524 210 -2054 211 l-229 0 -236 139\nc-813 477 -1593 884 -1852 966 -498 157 -1598 195 -2892 100 l-188 -14 -47 30\nc-92 58 -223 89 -297 70z m1912 -311 c13 -45 58 -305 88 -515 33 -226 74 -539\n71 -542 -7 -7 -1672 40 -2054 58 -357 16 -464 56 -573 215 -62 91 -87 225 -59\n326 12 40 56 74 192 148 369 198 799 289 1618 340 246 15 290 16 510 16 l194\n-1 13 -45z m649 10 c383 -36 717 -86 934 -139 210 -52 451 -163 720 -332 141\n-88 379 -259 380 -271 0 -5 -14 -8 -32 -8 -48 0 -114 -37 -140 -78 -24 -39\n-30 -113 -15 -189 l9 -43 -904 0 -904 0 -176 540 -175 540 47 0 c25 0 141 -9\n256 -20z"/>\n<path d="M2617 3125 c-431 -82 -774 -440 -838 -875 -17 -117 -7 -292 24 -410\n113 -436 497 -751 947 -777 507 -29 959 313 1076 813 28 117 26 348 -4 467\n-94 378 -383 670 -760 768 -105 27 -336 34 -445 14z m378 -310 c84 -21 209\n-85 280 -142 116 -94 210 -242 251 -393 23 -87 24 -260 0 -355 -58 -237 -242\n-439 -473 -519 -531 -186 -1074 277 -969 828 30 152 94 274 206 386 111 110\n237 178 385 206 84 16 235 11 320 -11z"/>\n<path d="M2918 2568 c2 -90 7 -167 12 -172 17 -17 108 58 201 166 l51 57 -48\n31 c-52 33 -131 65 -185 75 l-34 6 3 -163z"/>\n<path d="M2591 2700 c-62 -22 -167 -82 -164 -94 3 -13 237 -216 249 -216 7 0\n15 7 18 16 8 20 8 127 -1 232 -7 95 -8 96 -102 62z"/>\n<path d="M3209 2355 c-57 -64 -105 -123 -107 -131 -6 -25 46 -35 157 -29 58 3\n121 8 139 11 33 5 34 6 27 42 -7 44 -64 167 -92 201 l-19 24 -105 -118z"/>\n<path d="M2260 2409 c-31 -44 -68 -133 -77 -186 l-6 -33 155 0 c165 0 201 9\n181 44 -13 24 -204 216 -214 216 -5 0 -22 -18 -39 -41z"/>\n<path d="M2786 2354 c-36 -35 0 -87 44 -64 26 14 26 56 1 70 -25 13 -27 13\n-45 -6z"/>\n<path d="M2751 2186 c-57 -32 -68 -111 -22 -157 43 -42 101 -43 143 -1 42 42\n41 100 -1 143 -33 32 -78 38 -120 15z"/>\n<path d="M2560 2136 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20\n-54 2z"/>\n<path d="M3002 2124 c-27 -19 -28 -36 -3 -58 25 -23 61 -6 61 29 0 33 -30 49\n-58 29z"/>\n<path d="M2245 1993 c-77 -6 -76 -5 -59 -65 16 -55 61 -146 92 -186 l18 -23\n103 122 c57 67 104 129 105 138 1 14 -14 16 -104 17 -58 0 -127 -1 -155 -3z"/>\n<path d="M3165 1981 c-44 -4 -61 -10 -63 -22 -3 -16 210 -229 228 -229 22 0\n86 141 105 228 l7 32 -109 -2 c-59 -1 -135 -4 -168 -7z"/>\n<path d="M2776 1914 c-19 -18 -19 -20 -6 -45 6 -11 21 -19 35 -19 20 0 45 24\n45 44 0 10 -32 36 -45 36 -7 0 -21 -7 -29 -16z"/>\n<path d="M2589 1743 c-86 -90 -139 -151 -139 -162 0 -25 179 -101 236 -101\nl27 0 -7 143 c-9 166 -13 187 -35 187 -9 0 -46 -30 -82 -67z"/>\n<path d="M2936 1801 c-6 -10 -24 -168 -29 -258 -3 -60 -2 -63 19 -63 79 0 262\n68 248 92 -5 7 -53 64 -108 126 -93 105 -117 124 -130 103z"/>\n<path d="M10723 3125 c-318 -58 -597 -266 -743 -555 -223 -441 -98 -996 289\n-1288 112 -84 188 -125 311 -166 274 -91 545 -70 802 61 552 282 735 983 392\n1500 -225 339 -651 521 -1051 448z m385 -315 c348 -98 579 -443 532 -796 -67\n-508 -596 -796 -1055 -574 -239 116 -396 352 -412 620 -20 335 192 640 516\n745 122 40 289 42 419 5z"/>\n<path d="M11017 2568 c3 -90 9 -167 14 -172 13 -14 53 18 155 122 l95 97 -23\n18 c-50 40 -189 97 -235 97 -10 0 -11 -33 -6 -162z"/>\n<path d="M10705 2706 c-50 -16 -133 -58 -163 -82 l-23 -19 121 -107 c67 -60\n128 -108 135 -108 23 0 27 39 20 186 -8 162 -4 157 -90 130z"/>\n<path d="M11307 2354 c-59 -65 -107 -126 -107 -136 0 -11 11 -18 38 -22 44 -7\n278 7 289 17 15 16 -51 183 -94 236 l-19 24 -107 -119z"/>\n<path d="M10362 2413 c-39 -62 -70 -134 -78 -184 l-7 -39 152 0 c86 0 161 5\n172 10 17 10 18 13 5 38 -8 15 -59 71 -114 125 l-99 99 -31 -49z"/>\n<path d="M10888 2359 c-24 -14 -23 -56 2 -69 44 -23 80 29 44 64 -18 19 -23\n19 -46 5z"/>\n<path d="M10851 2187 c-49 -29 -66 -101 -35 -146 9 -13 32 -29 50 -37 29 -12\n39 -12 68 0 99 41 85 180 -19 192 -24 3 -50 -1 -64 -9z"/>\n<path d="M10660 2136 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20\n-54 2z"/>\n<path d="M11096 2124 c-9 -8 -16 -22 -16 -29 0 -13 26 -45 36 -45 20 0 44 25\n44 45 0 14 -8 29 -19 35 -25 13 -27 13 -45 -6z"/>\n<path d="M10335 1991 c-60 -6 -60 -6 -57 -36 9 -69 104 -248 122 -229 57 61\n210 250 207 258 -4 12 -176 17 -272 7z"/>\n<path d="M11267 1983 c-68 -5 -79 -19 -47 -60 23 -31 200 -193 210 -193 3 0\n20 24 37 53 29 48 52 111 67 180 l6 27 -107 -2 c-60 -1 -134 -3 -166 -5z"/>\n<path d="M10870 1910 c-16 -31 4 -62 38 -58 21 2 28 9 30 32 5 45 -47 65 -68\n26z"/>\n<path d="M10651 1703 c-56 -59 -101 -113 -101 -120 0 -28 172 -103 237 -103\nl26 0 -7 123 c-10 179 -15 207 -36 207 -10 0 -63 -48 -119 -107z"/>\n<path d="M11035 1801 c-7 -12 -23 -144 -29 -243 -4 -77 -4 -78 19 -78 45 0\n130 22 193 51 l64 29 -19 23 c-65 82 -198 227 -209 227 -7 0 -15 -4 -19 -9z"/>\n</g>\n</svg>\n\n  '},181:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Title=void 0;const r=n(842);e.Title=class{constructor(t,e,n){this.text=t,this.carsCount=e,this.classNameCarsCount=n}render(){const t=(0,r.createHTMLElement)("h1",["title"]);t.textContent=this.text;const e=(0,r.createHTMLElement)("span",[...this.classNameCarsCount]);return e.textContent=`(${this.carsCount})`,t.append(e),t}}},351:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setCarsData=e.carsData=void 0,e.carsData=[],e.setCarsData=t=>e.carsData.push(...t)},738:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setWinCarsData=e.winnerCarsData=void 0,e.winnerCarsData=[],e.setWinCarsData=t=>e.winnerCarsData.push(...t)},866:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Garage=void 0;const r=n(181),a=n(351),i=n(842),s=n(876),o=n(464);e.Garage=class{constructor(){this.container=(0,i.createHTMLElement)("div",["container"]);const t=(new o.GarageToolbar).render(),e=s.CarsList.getInstance().render(),n=new r.Title("Garage",a.carsData.length,["cars-count"]).render();this.container.append(n,t,e)}render(){return this.container}}},78:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Car=void 0;const i=n(321),s=n(731),o=n(842),c=a(n(897)),l=n(800);n(463),e.Car=class{constructor(t,e,n){this.MILLISECONDS_IN_SECOND=1e3,this.NUM_SEPARATOR=100,this.animation,this.carName=t,this.carColor=e,this.carId=n,this.carContainer=(0,o.createHTMLElement)("div",["car"]),this.carContainer.setAttribute("id",this.carId.toString());const r=(0,o.createHTMLElement)("div",["car-toolbar"]),a=(0,o.createHTMLElement)("div",["car-change-btns"]);this.changeCarBtn=(0,o.createHTMLElement)("button",["btn","btn-success","btn-sm"]),this.changeCarBtn.textContent="Change",this.changeCarBtn.addEventListener("click",(()=>this.changeCar())),this.removeCarBtn=(0,o.createHTMLElement)("button",["btn","btn-outline-danger","btn-sm","remove-car-btn"]),this.removeCarBtn.textContent="Remove",a.append(this.changeCarBtn,this.removeCarBtn),this.carNameTxt=(0,o.createHTMLElement)("p",["h6","car__name"]),this.carNameTxt.textContent=this.carName,r.append(a,this.carNameTxt),this.moveCarElem=(0,o.createHTMLElement)("div",["move-car"]),this.moveCarStart=(0,o.createHTMLElement)("div",["move-car__start"]),this.moveCarBtns=(0,o.createHTMLElement)("div",["move-car__btns"]),this.moveCarBtn=(0,o.createHTMLElement)("button",["btn","btn-dark","btn-sm","move-car-btn"]),this.moveCarBtn.textContent="A",this.moveCarBtn.addEventListener("click",(()=>this.moveCar())),this.stopCarBtn=(0,o.createHTMLElement)("button",["btn","btn-light","btn-sm","stop-car-btn"]),this.stopCarBtn.textContent="B",this.disableBtn(this.stopCarBtn),this.stopCarBtn.addEventListener("click",(()=>this.backCarToStartPosition())),this.moveCarBtns.append(this.moveCarBtn,this.stopCarBtn);const i=(0,o.createHTMLElement)("div",["car-img-container"]);i.innerHTML=(0,s.CarImg)(),this.carImg=i.querySelector("#car-img"),this.carChangeColor=i.querySelector("#car-color"),this.carChangeColor&&(this.carChangeColor.style.fill=this.carColor),this.moveCarStart.append(this.moveCarBtns,i);const l=(0,o.createHTMLElement)("div",["move-car__finish"]),h=(0,o.createHTMLElement)("div",["flag-finish"]),d=document.createElement("img");d.src=c.default.toString(),d.alt="",h.append(d),l.append(h),this.moveCarElem.append(this.moveCarStart,l),this.carContainer.append(r,this.moveCarElem)}backCarToStartPosition(){var t;return r(this,void 0,void 0,(function*(){try{yield fetch(i.ENGINE_URL+`?id=${this.carId}&status=stopped`,{method:"PATCH"})}catch(t){console.log(t)}const e=this.getCarBtn("move"),n=this.getCarBtn("stop");e&&this.undisableBtn(e),n&&this.disableBtn(n),null===(t=this.animation)||void 0===t||t.cancel()}))}startCarEngine(){return r(this,void 0,void 0,(function*(){try{const t=yield fetch(i.ENGINE_URL+`?id=${this.carId}&status=started`,{method:"PATCH"});return t.ok?yield t.json():null}catch(t){console.log(t)}}))}disableBtn(t){return t.setAttribute("disabled","")}undisableBtn(t){return t.removeAttribute("disabled")}driveCar(){fetch(i.ENGINE_URL+`?id=${this.carId}&status=drive`,{method:"PATCH"}).then((t=>{var e;t.ok||null===(e=this.animation)||void 0===e||e.pause()}))}getCarBtn(t){const e=document.querySelector(`[id='${this.carId}']`);return null==e?void 0:e.querySelector(`.${t}-car-btn`)}moveCar(){return r(this,void 0,void 0,(function*(){try{const t=yield this.startCarEngine(),e=this.animateCar((null==t?void 0:t.distance)/(null==t?void 0:t.velocity));this.driveCar();const n=this.getCarBtn("move"),r=this.getCarBtn("stop");n&&this.disableBtn(n),r&&this.undisableBtn(r),yield null==e?void 0:e.finished;const a=(null==e?void 0:e.currentTime)&&e.currentTime/this.MILLISECONDS_IN_SECOND,i=a?Math.round(a*this.NUM_SEPARATOR)/this.NUM_SEPARATOR:null;return{id:this.carId,time:i}}catch(t){console.log(t)}}))}animateCar(t){const e=document.querySelector(`[id='${this.carId}']`),n=null==e?void 0:e.querySelector(".move-car__start"),r=null==e?void 0:e.querySelector("#car-img");return e&&n&&(this.animation=null==r?void 0:r.animate([{left:0},{left:e.offsetWidth-n.offsetWidth+"px"}],{duration:t,iterations:1,direction:"alternate",fill:"forwards"})),this.animation}changeCar(){const t=new l.Popup(this.carNameTxt,this.carChangeColor,this.carId);this.carContainer.append(t.render())}render(){return this.carContainer}}},876:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CarsList=void 0;const a=n(351),i=n(78),s=n(321),o=n(842);n(784);class c{constructor(){this.START_NUM_PAGE=1,this.CURRENT_PAGE=1,this.RECORDS_PER_PAGE=7,this.COUNT_ID=a.carsData.length,this.carsArr=[],this.carsList=(0,o.createHTMLElement)("div",["list-cars"]);const t=(0,o.createHTMLElement)("h3",["list-cars__title"]);t.textContent="Page#",this.pageNum=(0,o.createHTMLElement)("span",["page-num"]),this.pageNum.textContent=this.CURRENT_PAGE.toString(),t.append(this.pageNum),this.carsList.append(t),this.carsContainer=(0,o.createHTMLElement)("div",["cars"]),this.carsContainer.addEventListener("click",(t=>this.removeCar(t))),this.listBtns=(0,o.createHTMLElement)("div",["list-cars__btns"]);const e=(0,o.createHTMLElement)("button",["btn","btn-outline-primary"]);e.textContent="Prev",e.addEventListener("click",(()=>this.prevPage()));const n=(0,o.createHTMLElement)("button",["btn","btn-primary"]);n.textContent="Next",n.addEventListener("click",(()=>this.nextPage())),this.listBtns.append(e,n)}removeCar(t){return r(this,void 0,void 0,(function*(){const e=t.target instanceof HTMLElement?t.target.closest(".remove-car-btn"):null;if(e){const t=e.closest(".car"),n=t?t.id:null,r=a.carsData.filter((t=>!n||+t.id!=+n));n&&(this.carsArr=this.carsArr.filter((t=>t.carId.toString()!==n))),(0,a.setCarsData)(r);try{yield fetch(s.GARAGE_URL+n,{method:"DELETE"})}catch(t){console.log(t)}(0,o.updateCarsAmountHTML)(),null==t||t.remove(),this.changePage(this.CURRENT_PAGE)}}))}static getInstance(){return c.instance||(c.instance=new c),c.instance}getDefaultCars(){return r(this,void 0,void 0,(function*(){try{const t=yield fetch(s.GARAGE_URL);return yield t.json()}catch(t){console.log(t)}}))}changePage(t){t<this.START_NUM_PAGE&&(t=this.START_NUM_PAGE),t>this.pagesCount()-this.START_NUM_PAGE&&(t=this.pagesCount()),this.changePageNumber(t),this.carsContainer.innerHTML="",this.carsArr=[];for(let e=(t-this.START_NUM_PAGE)*this.RECORDS_PER_PAGE;e<t*this.RECORDS_PER_PAGE;e++)if(a.carsData[e]){const t=new i.Car(a.carsData[e].name,a.carsData[e].color,a.carsData[e].id);this.carsArr.push(t),this.carsContainer.append(t.render())}}changePageNumber(t){this.pageNum.textContent=t.toString()}prevPage(){this.CURRENT_PAGE>this.START_NUM_PAGE&&(this.CURRENT_PAGE--,this.changePage(this.CURRENT_PAGE))}nextPage(){this.CURRENT_PAGE<this.pagesCount()&&(this.CURRENT_PAGE++,this.changePage(this.CURRENT_PAGE))}pagesCount(){let t=a.carsData.length;return t<this.START_NUM_PAGE&&(t=this.START_NUM_PAGE),Math.ceil(t/this.RECORDS_PER_PAGE)}render(){return this.getDefaultCars().then((t=>{t.forEach((t=>{const e=new i.Car(t.name,t.color,t.id);this.carsContainer.append(e.render()),a.carsData.find((e=>e.id===t.id))||(this.carsArr.push(e),a.carsData.push({name:t.name,color:t.color,id:t.id})),this.COUNT_ID=a.carsData.length,this.changePage(this.CURRENT_PAGE)})),(0,o.updateCarsAmountHTML)(),this.carsList.append(this.carsContainer),this.carsList.append(this.listBtns)})),this.carsList}}e.CarsList=c},464:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.GarageToolbar=void 0;const a=n(321),i=n(351),s=n(842),o=n(876);n(559);const c=n(78),l=n(738);e.GarageToolbar=class{constructor(){this.GENERATE_CARS_AMOUNT=100,this.MAX_COLOR_VALUE=16777215,this.carBrandsArr=["Audi","BMW","Bentley","Chevrolet","Honda","Lexus","Nissan","Tesla","Toyota","Rolls-Royce"],this.carModelsArr=["3 Series","5 Series","7 Series","X1","X3","X4","X5","X7","3 Series GT","6 Series GT","Model S","Model X","Model 3","Model Y"],this.garageToolbar=(0,s.createHTMLElement)("div",["garage-toolbar"]);const t=(0,s.createHTMLElement)("form",["add-car"]),e=(0,s.createHTMLElement)("div",["car-input"]);this.inputText=document.createElement("input"),this.inputText.classList.add("form-control","form-control-sm","add-car__input-text"),this.inputText.setAttribute("placeholder","Name the car"),this.carName=this.inputText.value,this.inputText.addEventListener("change",(t=>this.setCarName(t))),e.append(this.inputText);const n=document.createElement("input");n.classList.add("form-control","form-control-sm","add-car__input-color"),n.setAttribute("type","color"),this.carColor=n.value,n.addEventListener("change",(t=>this.setCarColor(t)));const r=(0,s.createHTMLElement)("button",["btn","btn-primary"]);r.textContent="Create",r.addEventListener("click",(t=>this.createCarFromForm(t))),t.append(e,n,r);const a=(0,s.createHTMLElement)("div",["race-btns"]),i=(0,s.createHTMLElement)("button",["btn","btn-success"]);i.textContent="Race",i.addEventListener("click",(()=>this.raceCars()));const o=(0,s.createHTMLElement)("button",["btn","btn-danger"]);o.textContent="Reset",o.addEventListener("click",(()=>this.resetCars()));const c=(0,s.createHTMLElement)("button",["btn","btn-secondary"]);c.textContent="Generate New Cars",c.addEventListener("click",(()=>this.generateNewCars())),a.append(i,o,c),this.winnerPopup=(0,s.createHTMLElement)("div",["winner-popup","hide"]);const l=(0,s.createHTMLElement)("div",["winner-popup__wrapper"]);this.winnerPopupTitle=(0,s.createHTMLElement)("h3",["winner-popup__title"]),this.closePopupBtn=(0,s.createHTMLElement)("button",["popup__close-btn"]),this.closePopupBtn.addEventListener("click",(()=>this.hideWinnerPopup())),l.append(this.closePopupBtn,this.winnerPopupTitle),this.winnerPopup.append(l),this.garageToolbar.append(t,a,this.winnerPopup)}showWinnerPopup(t,e){this.winnerPopupTitle.textContent=`Winner of Race: ${t} (${e} seconds)`,this.winnerPopup.classList.remove("hide")}hideWinnerPopup(){this.winnerPopup.classList.add("hide")}raceCars(){return r(this,void 0,void 0,(function*(){try{const t=o.CarsList.getInstance(),e=yield Promise.race(t.carsArr.map((t=>r(this,void 0,void 0,(function*(){return yield t.moveCar()}))))),n=i.carsData.find((t=>t.id===(null==e?void 0:e.id)));n&&this.showWinnerPopup(n.name,null==e?void 0:e.time);const a=l.winnerCarsData.find((t=>t.id===(null==e?void 0:e.id)));if(a)a.wins++,(null==e?void 0:e.time)&&(null==e?void 0:e.time)<a.time&&(a.time=null==e?void 0:e.time),this.updateWinnerCar(null==e?void 0:e.id,a);else{let t=null;e&&e.time&&n&&(t={id:e.id,time:e.time,wins:1}),this.setWinnerCar(t),t&&l.winnerCarsData.push(t)}}catch(t){console.log(t)}}))}setWinnerCar(t){return r(this,void 0,void 0,(function*(){try{yield fetch(a.WINNERS_URL,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(t)})}catch(t){console.log(t)}}))}updateWinnerCar(t,e){return r(this,void 0,void 0,(function*(){try{yield fetch(a.WINNERS_URL+t,{method:"PUT",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({time:e.time,wins:e.wins})})}catch(t){console.log(t)}}))}resetCars(){o.CarsList.getInstance().carsArr.forEach((t=>{t.backCarToStartPosition()}))}setCarName(t){const e=t.target instanceof HTMLInputElement?t.target.value:null;this.carName=e,this.inputText.value=""}setCarColor(t){const e=t.target instanceof HTMLInputElement?t.target.value:null;this.carColor=e}getRandomElementFromArray(t){return t[Math.floor(Math.random()*t.length)]}getRandomColor(){return`#${Math.floor(Math.random()*+this.MAX_COLOR_VALUE.toString(10)).toString(16)}`}generateNewCars(){for(let t=0;t<this.GENERATE_CARS_AMOUNT;t++)this.createNewCar(`${this.getRandomElementFromArray(this.carBrandsArr)} ${this.getRandomElementFromArray(this.carModelsArr)}`,this.getRandomColor())}createCarFromForm(t){t.preventDefault();const e=this.carName?this.carName:"",n=this.carColor?this.carColor:"";this.createNewCar(e,n)}createNewCar(t,e){return r(this,void 0,void 0,(function*(){const n=o.CarsList.getInstance();n.COUNT_ID++;const r={name:t,color:e,id:n.COUNT_ID};n.carsArr.push(new c.Car(t,e,n.COUNT_ID)),i.carsData.push({name:t,color:e,id:n.COUNT_ID}),n.changePage(n.CURRENT_PAGE),(0,s.updateCarsAmountHTML)();try{yield fetch(a.GARAGE_URL,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(r)})}catch(t){console.log(t)}}))}render(){return this.garageToolbar}}},800:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Popup=void 0;const a=n(351),i=n(321),s=n(842);n(154),e.Popup=class{constructor(t,e,n){this.carId=n,this.elemWithText=t,this.elemWithColor=e,this.popupContainer=(0,s.createHTMLElement)("div",["popup-wrapper"]);const r=(0,s.createHTMLElement)("div",["popup"]),a=(0,s.createHTMLElement)("h4",["popup__title"]);a.textContent="Change Car";const i=(0,s.createHTMLElement)("form",["change-car"]),o=(0,s.createHTMLElement)("div",["input-wrapper"]),c=document.createElement("input");c.classList.add("form-control","form-control-sm","change-car__input-text"),c.setAttribute("placeholder","Name the car"),t.textContent&&(c.value=t.textContent),this.newCarName=t.textContent,c.addEventListener("change",(t=>this.changeCarName(t)));const l=document.createElement("input");l.classList.add("form-control","form-control-sm","change-car__input-color"),l.setAttribute("type","color"),e&&(l.value=(0,s.RGBToHex)(e.style.fill)),this.newCarColor=l.value,l.addEventListener("change",(t=>this.changeCarColor(t))),o.append(c,l);const h=(0,s.createHTMLElement)("button",["btn","btn-primary","btn-sm"]);h.textContent="Update",h.addEventListener("click",(t=>this.updateCarParams(t))),i.append(o,h),this.closePopupBtn=(0,s.createHTMLElement)("button",["popup__close-btn"]),this.closePopupBtn.addEventListener("click",(()=>this.removePopup())),r.append(this.closePopupBtn,a,i),this.popupContainer.append(r)}changeCarName(t){const e=t.target instanceof HTMLInputElement?t.target.value:null;this.newCarName=e}changeCarColor(t){const e=t.target instanceof HTMLInputElement?t.target.value:null;this.newCarColor=e}updateCarParams(t){return r(this,void 0,void 0,(function*(){t.preventDefault(),this.elemWithText.textContent=this.newCarName,this.elemWithColor&&this.newCarColor&&(this.elemWithColor.style.fill=this.newCarColor),this.removePopup();const e=a.carsData.find((t=>t.id===this.carId));e&&this.newCarName&&this.newCarColor&&(e.color=this.newCarColor,e.name=this.newCarName);try{yield fetch(i.GARAGE_URL+this.carId,{method:"PUT",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({name:this.newCarName,color:this.newCarColor})})}catch(t){console.log(t)}}))}removePopup(){this.popupContainer.remove()}render(){return this.popupContainer}}},252:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function o(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Winners=void 0;const a=n(731),i=n(181),s=n(351),o=n(738),c=n(321),l=n(842);e.Winners=class{constructor(){this.START_NUM_PAGE=1,this.CURRENT_PAGE=1,this.RECORDS_PER_PAGE=10,this.title=new i.Title("Winners",o.winnerCarsData.length,["winners-count"]).render();const t=(0,l.createHTMLElement)("h3",["list-cars__title"]);t.textContent="Page#",this.pageNum=(0,l.createHTMLElement)("span",["winners-page-num"]),this.pageNum.textContent=this.CURRENT_PAGE.toString(),t.append(this.pageNum),this.container=(0,l.createHTMLElement)("div",["container"]);const e=(0,l.createHTMLElement)("table",["table"]),n=(0,l.createHTMLElement)("thead",["table-dark"]),r=document.createElement("tr");[{name:"№",isSorted:!1},{name:"Car Image",isSorted:!1},{name:"Car Name",isSorted:!1},{name:"Wins",isSorted:!0,param:"wins",isDesc:!0},{name:"Best time",isSorted:!0,param:"time",isDesc:!0}].forEach((t=>{const e=document.createElement("th");e.setAttribute("scope","col"),e.textContent=t.name,t.isSorted&&t.param&&(e.addEventListener("click",(()=>this.sortColumn(t.param,t.isDesc=!t.isDesc))),e.classList.add("active-table-column")),r.append(e)})),n.append(r),this.tBody=document.createElement("tbody");const a=(0,l.createHTMLElement)("div",["list-cars__btns"]),s=(0,l.createHTMLElement)("button",["btn","btn-outline-primary"]);s.textContent="Prev",s.addEventListener("click",(()=>this.prevPage()));const c=(0,l.createHTMLElement)("button",["btn","btn-primary"]);c.textContent="Next",c.addEventListener("click",(()=>this.nextPage())),a.append(s,c),e.append(n,this.tBody),this.container.append(this.title,t,e,a)}sortColumn(t,e){o.winnerCarsData.sort(((e,n)=>e[t]-n[t])),e&&o.winnerCarsData.reverse(),this.changePage(this.CURRENT_PAGE)}addElementsToTable(t,e){const n=document.createElement("tr"),r=document.createElement("th");r.textContent=(e+1).toString();const i=document.createElement("td");i.innerHTML=(0,a.CarImg)();const o=s.carsData.find((e=>e.id===t.id)),c=i.querySelector("#car-color");c&&o&&(c.style.fill=o.color);const l=document.createElement("td");o&&(l.textContent=o.name);const h=document.createElement("td");h.textContent=t.wins.toString();const d=document.createElement("td");d.textContent=t.time.toString(),n.append(r,i,l,h,d),this.tBody.append(n)}deleteWinnerCar(t){return r(this,void 0,void 0,(function*(){try{yield fetch(c.WINNERS_URL+t,{method:"DELETE"})}catch(t){console.log(t)}}))}updateWinnerCarsData(){const t=o.winnerCarsData.filter((t=>r(this,void 0,void 0,(function*(){return!!s.carsData.find((e=>e.id===t.id))||(yield this.deleteWinnerCar(t.id),!1)}))));(0,o.setWinCarsData)(t)}getWinnerCars(){return r(this,void 0,void 0,(function*(){try{const t=yield fetch(c.WINNERS_URL);(yield t.json()).forEach((t=>r(this,void 0,void 0,(function*(){!o.winnerCarsData.find((e=>t.id===e.id))&&o.winnerCarsData.push(t)})))),this.updateWinnerCarsData()}catch(t){console.log(t)}}))}updateWinnersCount(){const t=this.title.querySelector(".winners-count");t&&(t.textContent=`(${o.winnerCarsData.length.toString()})`)}changePage(t){return r(this,void 0,void 0,(function*(){t<this.START_NUM_PAGE&&(t=this.START_NUM_PAGE),t>this.pagesCount()-this.START_NUM_PAGE&&(t=this.pagesCount()),this.changePageNumber(t),this.tBody.innerHTML="",yield this.getWinnerCars();for(let e=(t-this.START_NUM_PAGE)*this.RECORDS_PER_PAGE;e<t*this.RECORDS_PER_PAGE;e++)this.updateWinnersCount(),o.winnerCarsData[e]&&this.addElementsToTable(o.winnerCarsData[e],e)}))}changePageNumber(t){this.pageNum.textContent=t.toString()}prevPage(){this.CURRENT_PAGE>this.START_NUM_PAGE&&(this.CURRENT_PAGE--,this.changePage(this.CURRENT_PAGE))}nextPage(){this.CURRENT_PAGE<this.pagesCount()&&(this.CURRENT_PAGE++,this.changePage(this.CURRENT_PAGE))}pagesCount(){let t=o.winnerCarsData.length;return t<this.START_NUM_PAGE&&(t=this.START_NUM_PAGE),Math.ceil(t/this.RECORDS_PER_PAGE)}render(){return r(this,void 0,void 0,(function*(){return this.changePage(this.CURRENT_PAGE),this.container}))}}},321:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WINNERS_URL=e.ENGINE_URL=e.GARAGE_URL=void 0;const n="http://127.0.0.1:3000";e.GARAGE_URL=n+"/garage/",e.ENGINE_URL=n+"/engine",e.WINNERS_URL=n+"/winners/"},472:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RGBToHex=void 0,e.RGBToHex=t=>{let e=t.indexOf(",")>-1?",":" ";const n=t.substr(4).split(")")[0].split(e);let r=(+n[0]).toString(16),a=(+n[1]).toString(16),i=(+n[2]).toString(16);return 1==r.length&&(r="0"+r),1==a.length&&(a="0"+a),1==i.length&&(i="0"+i),"#"+r+a+i}},912:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createHTMLElement=void 0,e.createHTMLElement=(t,e)=>{const n=document.createElement(t);return n.classList.add(...e),n}},842:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RGBToHex=e.updateCarsAmountHTML=e.createHTMLElement=void 0;var r=n(912);Object.defineProperty(e,"createHTMLElement",{enumerable:!0,get:function(){return r.createHTMLElement}});var a=n(266);Object.defineProperty(e,"updateCarsAmountHTML",{enumerable:!0,get:function(){return a.updateCarsAmountHTML}});var i=n(472);Object.defineProperty(e,"RGBToHex",{enumerable:!0,get:function(){return i.RGBToHex}})},266:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.updateCarsAmountHTML=void 0;const r=n(351);e.updateCarsAmountHTML=()=>{const t=document.querySelector(".cars-count");t&&(t.textContent=`(${r.carsData.length})`)}},897:(t,e,n)=>{t.exports=n.p+"assets/svg/flag.svg"}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t+"../"})(),(()=>{const t=n(601);n(943),n(300);const e=new t.App,r=document.querySelector(".main");null==r||r.append(e.render())})()})();